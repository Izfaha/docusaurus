"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[7594],{4151:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"sso-captive-portal/set-mikrotik","title":"CHR configuration (Router OS)","description":"Create Network Configurasion For VMs","source":"@site/docs/sso-captive-portal/set-mikrotik.md","sourceDirName":"sso-captive-portal","slug":"/sso-captive-portal/set-mikrotik","permalink":"/docusaurus/docs/sso-captive-portal/set-mikrotik","draft":false,"unlisted":false,"editUrl":"https://github.com/Izfaha/docusaurus/tree/main/docs/sso-captive-portal/set-mikrotik.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_label":"Mikrotik Configuration","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Pre-Requests","permalink":"/docusaurus/docs/sso-captive-portal/pre-requests"},"next":{"title":"Freeradius Server Configuration","permalink":"/docusaurus/docs/sso-captive-portal/set-freeradius-server"}}');var s=t(4848),o=t(8453);const r={sidebar_label:"Mikrotik Configuration",sidebar_position:2},a="CHR configuration (Router OS)",d={},c=[{value:"Create Network Configurasion For VMs",id:"create-network-configurasion-for-vms",level:2},{value:"CHR Configuration Using MikroTik",id:"chr-configuration-using-mikrotik",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"chr-configuration-router-os",children:"CHR configuration (Router OS)"})}),"\n",(0,s.jsx)(n.h2,{id:"create-network-configurasion-for-vms",children:"Create Network Configurasion For VMs"}),"\n",(0,s.jsxs)(n.p,{children:["This bash script will create a switch name ",(0,s.jsx)(n.code,{children:"br0-lan"})," type bridge and taps name 'tap 0, tap 1, tap 2'."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"tap 0"})," for CHR."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"tap 1"})," for freeradius server."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"tap 2"})," for client (Debian)."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:'#!/bin/bash\n# run using root\nif [ "EUID" -ne 0 ]; then\n    echo "You need to be root user to run this script!"\n    exit 1\nfi\n\necho "Starting to configure network for VM..."\n\necho "Add bridge, name \\"br0-lan\\""\n# create switch "br0-lan" using bridge\nsudo ip link add br0-lan type bridge\n\necho "add tap devices (tap0, tap1, tap2)"\n# create tap "Lubang switch" \nsudo ip tuntap add tap0 mode tap\nsudo ip tuntap add tap1 mode tap\nsudo ip tuntap add tap2 mode tap\n\necho "Connecting tap0, tap1, tap2 to br0-lan..."\nsudo ip link set tap0 master br0-lan\nsudo ip link set tap1 master br0-lan\nsudo ip link set tap2 master br0-lan\n\necho "Activate interface \\"br0-lan\\" dan \\"tap\\" devices..." \n# to link up all of these \nsudo ip link set br0-lan up\nsudo ip link set tap0 up\nsudo ip link set tap1 up\nsudo ip link set tap2 up\n\necho "Done to configure network."\n\n# checking and net-tools installation\n\necho "Checking net-tools installation..."\n\n# check if ifconfig exists\nif ! command -v ifconfig &> /dev/null\nthen\n    echo "\\"ifconfig\\" is not found, trying to install it..."\n\n    # distribution detection and install net-tools\n    if [ -f /etc/debian_version ]; then\n        # Debian/Ubuntu\n        echo "Debian distribution detected, starting to install net-tools..."\n        sudo apt update\n        sudo apt install net-tools -y\n    elif [ -f /etc/redhat-release ]; then\n        echo "Red Hat/CentOS/Fedora distribution detected, starting to install net-tools..."\n        sudo yum install -y net-tools || sudo dnf install -y net-tools\n    elif [ -f /etc/arch-release ]; then\n        echo "Arch distribution detected, starting to install net-tools..."\n        sudo pacman -Sy --noconfirm net-tools \n    else\n        echo "Uknwon linux distribution."\n        echo "Please, install \\\'net-tools\\\' manually."\n    fi\nelse \n    echo "\\\'ifconfig\\\' has installed in your system!"\nfi \n\necho "Display all interfaces..."\nifconfig || ip a\n\n'})}),"\n",(0,s.jsx)(n.h2,{id:"chr-configuration-using-mikrotik",children:"CHR Configuration Using MikroTik"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Set IP Interface"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"IP list",src:t(9870).A+"",width:"367",height:"84"})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsx)(n.li,{children:"Set hotspot"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["I establishes a new Hotspot instance within Mikrotik RouterOS on the ",(0,s.jsx)(n.code,{children:"ether2"})," interface, leveraging the ",(0,s.jsx)(n.code,{children:"hs-pool1"})," address range for client IP assignment, adhering to the configurations defined in ",(0,s.jsx)(n.code,{children:"hsprof1"}),", and designated by the name ",(0,s.jsx)(n.code,{children:"hotspot1"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"/ip hotspot add interface=ether2 address-pool=hs-pool1 profile=hsprof1 name=hotspot1\n# buat hotspot untuk menggunakan freeradius\n/ip hotspot user profile set hsprof1 use-radius=yes\n# check dan cari apakah 'use-radius=yes' harus 'yes'\n/ip hotspot profile print\n# kalo belum pake command berikut, lalu ketik angka profile yang perlu diseting menggunakan freeradius\n/ip hotspot profile set use-radius=yes\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"hsprof",src:t(8930).A+"",width:"873",height:"214"})}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsx)(n.li,{children:"Configure MikroTik to use FreeRADIUS"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Tambahkan IP radius server dengan secret 'secret123' ",(0,s.jsx)(n.strong,{children:"(secret boleh diubah)"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"/ip hotspot profile set use-radius=yes\n/ppp aaa set use-radius=yes\n/radius add address=192.168.1.2 secret=secret123 service=ppp,hotspot\n"})})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var i=t(6540);const s={},o=i.createContext(s);function r(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(o.Provider,{value:n},e.children)}},8930:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/hsprofile-112b7b366db6b069d8e56a926db2f48e.png"},9870:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/addres-list-a5288575d8bc740a5a97adc79282045c.png"}}]);